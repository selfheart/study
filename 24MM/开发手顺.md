<center>开发手顺</center>

## 1、网址链接

### 1.1环境搭建

http://wiki.iauto.com/wiki/Project:Teslin/%E7%8E%AF%E5%A2%83%E6%9E%84%E7%AD%91

1.2 密钥相关

\\uranus.storm\iBigtom\Users\update\03_Android\04_21MM\09_密钥

\\uranus.storm\iAuto-share\User\update\24MM\02_概要设计\04_OTA安全&key更新方案



### 2、update_engine 调试手顺



1、关闭selinux(否则无法使用IBootControl接口)
    setenforce 0

2、查看update_engine log

```
su
echo 0 > /proc/sys/kernel/printk
setprop persist.log.tag.update_engine V
setprop persist.log.tag S
setprop persist.iauto.log.switch 31
logcat -G 256m && logcat -g
logcat -s update_engine &
```

3、查看UPDATE-COMPOSER log

```
su
echo 0 > /proc/sys/kernel/printk
setprop persist.log.tag.UPDATE-COMPOSER V
setprop persist.log.tag S
setprop persist.iauto.log.switch 31
logcat -G 256m && logcat -g
logcat -s UPDATE-COMPOSER &
```

4、



6、查看分区

super分区

```
lpdump /dev/block/by-name/super
```

 

全部分区

```shell
cat /proc/partitions
```







### ３.AES KEY更新　

１.２４ＭＭ　Android１２　环境下支持的ｋｅｙｓｔｏｒｅ类型

![image-20230714162036676](C:\Users\jiangzhuangzhuang\study\study\24MM\开发手顺.assets\image-20230714162036676.png)

注意：不同类型的keystore 使用差别很大，存储位置存储方式都有很大差异

#### Android keystore:

1).　设置ＡＥＳＫＥＹ时必须指定密码　keyStore.setEntry(alias, secretKeyEntry, protectionParam);

setAESKeyEntry failed, e = java.security.KeyStoreException: Protection parameters must be specified when importing a symmetric key 

![image-20230714175044563](C:\Users\jiangzhuangzhuang\study\study\24MM\开发手顺.assets\image-20230714175044563.png)



